---
title: DataBase (MariaDB/MySQL)
category: Et Cetera
order: 2
---

### DataBase?

**DataBase**: Storage of Data

**DBMS** : Software manage/operate DataBase

**Relational Database (a.k.a RDBMS)** : 

database that organizes data into `tables` with `rows` and `columns`, and <u>establishes relationships between tables based on common fields, called keys</u>

### Features of DataBase

· Real Time Accessibility :  
Databases provide immediate and constant access to data, allowing users to retrieve and modify data quickly and efficiently.

· Continuous Change:
Databases are designed to handle continuous changes to the data they store, such as updates, insertions, and deletions.

· Concurrent Sharing:
Databases allow multiple users or applications to access and manipulate data simultaneously, without interfering with each other.

· Reference By Content:
Databases use a unique identifier, such as a primary key, to reference data. This ensures that data is accessed accurately and consistently, regardless of its physical location within the database.

· Data Independence:
Database systems provide a layer of abstraction between the physical storage of data and the applications that use it, allowing for flexibility and easier maintenance. This means that changes to the database structure or organization can be made without affecting the applications that use it.


### Setting MariaDB (MacOS)

**[Mac Os]**

**1.** Download MariaDB thru homeBrew 

[homebrew install code]
```
$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

**2.** search & install mariadb in brew

```s
$ brew search mariadb
$ brew install mariadb
$ brew search mariadb # the version i've installed will be marked
```
**3.** Move to dir Mariadb placed

```s
$ cd /usr/local/Cellar/mariadb
$ cd /usr/local/Cellar/mariadb/ls #list it
$ cd 10.7.3/bin
```

**4.** install mariadb

```s
$ sudo -i # admin mode
$ sudo ./mariadb-secure-installation   #./ <- current path
```

**5.** service status in brew

```s
$ brew services info mariadb    #checking status
$ brew services stop mariadb    #stoping the service
$ brew services start mariadb   #starting the service
$ brew services restart mariadb #re-starting the service
```

**6.** Server access

```s
$ cd /usr/local/var/mysql
$ mysql -u root -p 
$ select version();
$ show databases;
$ use 'dbname';
$ show tables;
$ select 'Host', 'User', 'Password' from 'tableName';
```


### Setting MariaDB (Window)

**[Window]**

**1.** Download it a.zip file over(https://mariadb.org/download/?t=mariadb&p=mariadb&r=11.1.0 ) and decompress it.

**2.** Open CMD w Admin (shift + CMD click) 

**Service Registration**
```s
> cd ./path where the .zip is decompressed/
> cd mariadb-10.6.7/bin
> mariadb-install-db.exe -S 'MariaDB' -p 'password'
```
**Service Start/Stop**
```s
> sc start MariaDB
> sc stop MariaDB
```

```s
> select version();
> show databases;
> use 'dbname';
> show tables;
> select 'Host', 'User', 'Password' from 'tableName';
```


### Create DataBase Instance

· SQL is generally used to manage DBMS data

|**DDL**: Data Definition Language|
|--|
|CREATE: create a new database, table, view, index, or others|
|ALTER: modify the structure of an existing database object|
|DROP: delete an existing database object|
|TRUNCATE: remove all data from a table, but keep the table structure|

|**DML**: Data Manupulation Language|
|--|
|INSERT: add new rows to a table|
|UPDATE: modify existing rows in a table|
|DELETE: remove existing rows from a table|
|SELECT: retrieve data from one or more tables based on specified criteria|

|**DCL**: Data Control Language|
|---|
|GRANT: grant privileges (e.g., SELECT, INSERT, UPDATE, DELETE) to a user or role|
|REVOKE: revoke privileges from a user or role|
|TRANSACTION: start a new transaction|
|COMMIT: commit changes made within a transaction to the db|
|ROLLBACK: undo changes made within a transaction|
|...|


### Data Type

|Data type|Oracle|MySQL|SQL Server|PostgreSQL|
|--|--|--|--|--|
|**Numeric** |NUMBER<br>FLOAT|INT<br>FLOAT<br>DOUBLE<br>...|INT<br>FLOAT<br>...|INTEGER<br>SMALLINT<br>DOUBLE<br>...|
|**String**|CHAR<br>VARCHAR2|CHAR<br>VARCHAR|CHAR<br>VARCHAR|CHAR<br>VARCHAR|
|**Boolean**|-|BIT|BIT|BOOLEAN|
|**Date/Time** |DATE<br>TIMESTAMP|DATE<br>TIME<br>DATETIME<br>TIMESTAMP<br>YEAR|DATE<br>TIME<br>DATETIME<br>DATETIME2<br>SMALLDATETIME|DATE<br>TIME<br>TIMESTAMP|
|Big Objects|LONG<br>CLOB<br>BLOB|TEXT<br>MEDIUMTEXT<br>LONGTEXT<br>BLOB|TEXT<br>BINARYM<br>IMAGE|TEST|

### Table Join?

**1.** Inner Join: 

<u>Returns only the matching rows from both tables.</u>

**2.** Full Join: 

<u>Returns all the rows from both tables</u>, and where there are no matches, NULL values are returned.

**3.** Left Join: 

<u>Returns all the rows from the left table, and the matching rows from the right table.</u> If there is no match, NULL values are returned for the right table columns.

**4.** Right Join: 

<u>Returns all the rows from the right table, and the matching rows from the left table.</u> If there is no match, NULL values are returned for the left table columns.
```s
# InnerJoin               # FullJoin
_______________          _______________
|left |*|right|          |left |*|right|
|table|*|table|          |table|*|table|
|     |*|     |          |*****|*|*****|
|     |*|     |          |*****|*|*****|
+-------------+          +-------------+

# LeftJoin               # RightJoin
_______________          _______________
|left |*|right|          |left |*|right|
|table|*|table|          |table|*|table|
|*****|*|     |          |     |*|*****|
|*****|*|     |          |     |*|*****|
+-------------+          +-------------+
                         
```

### SQL Example


**Table Creation Sample**

```s
|----------------|  CREATE TABLE MEMBER ( 
|   User-Name    |     USR_NM VARCHAR(50),  
|   User-Id      |     USR_ID VARCHAR(50),
|   User-Pw      |     USR_PW VARCHAR(50),
|   User-Age     |->   USR_AGE INT,
|   User-Dob     |     USR_DOB DATE,
|   Send-SMS     |     SMS_YN BIT,
| Registered-Date|     RG_DATE DATETIME
|________________|    )
```

```s
|----------------|  CREATE TABLE PROMO_INFO ( 
| Promo-Start-DT |     START_DT DATETIME,  
|  Promo-End-DT  |->   END_DT DATETIME,  
|  Promo-Name    |     PROMO_NM VARCHAR(50),
|  Promo-Content |     PROMO_CONTENT TEXT,
|________________|    )
```

**SQL Sample**

```s
#DATABASE DELETION
$ DROP DATABASE 'INSTANCE_NAME';

#USER CREATION
$ CREATE USER 'USER_NAME'@'LOCALHOST' IDENTIFIED BY 'PW';
$ CREATE USER 'USER_NAME'@'%' IDENTIFIED BY 'PW'; 

#GRANT 
$ USE 'DBNAME'
$ GRANT ALL PRIVILEGES ON 'DBNAME'.* TO 'USER_NAME'@'LOCALHOST' IDENTIFIED BY 'PW';
$ GRANT ALL PRIVILEGES ON 'DBNAME'.* TO 'USER_NAME'@'%' IDENTIFIED BY 'PW';

#FLUSH (SAVE)
$ FLUSH PRIVILEGES;

#DATA INSERTION 
INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);

#DATA INQUIRY
SELECT column1, column2, ...
FROM table_name
WHERE condition;

#DATA UPDATE (condition required)
UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition; #e.g-> email = 'bzhs@icloud.com';

#DATA DELETION (condition required)
DELETE FROM table_name
WHERE condition; #e.g-> email = 'bzhs@icloud.com'

#SET PRIMARY KEY
ALTER TABLE MEMBER ADD PRIMARY KEY (USR_ID);  

#TABLE INNER JOIN
SELECT M1.*,M2.*
FROM MEMBER AS M1
    JOIN MEMBER_2 AS M2 
        ON M2.MEMEBR_TYPE = M1.MEMBER_TYPE 
           AND M2.USR_ID =M1.USR.ID
;

#TABLE LEFT JOIN
SELECT M1.*,M2.*
FROM MEMBER AS M1
    LEFT JOIN MEMBER_2 AS M2 
             ON M2.MEMEBR_TYPE = M1.MEMBER_TYPE 
                AND M2.USR_ID =M1.USR.ID 
;

#TABLE RIGHT JOIN
SELECT M1.*,M2.*
FROM MEMBER AS M1
    LEFT JOIN MEMBER_2 AS M2 
             ON M2.MEMEBR_TYPE = M1.MEMBER_TYPE 
                AND M2.USR_ID =M1.USR.ID 
;

#TABLE FULL JOIN
SELECT M1.*,M2.*
FROM MEMBER AS M1
     JOIN MEMBER_2 AS M2 
    
;
```

### DBMS Built-In Functions

**0.** Case 

```s
CASE
  WHEN CONDITION1 THEN RESULT1
  WHEN CONDITION2 THEN RESULT2
  WHEN CONDITION3 THEN RESULT3
  WHEN CONDITION4 THEN RESULT4
END
```

**1.** String Func

```s
SELECT MEMEBER_TYPE,USER_ID,PASSWORD,NAME
    
    ,CONCAT(SUBSTRING(PASSWORD,1,2),'**') AS PASSWORD_MASKED

    ,LENGTH(PASSWORD) AS PASSWORD_LENGTH;

    ,CASE
        WHEN LENGTH(PASSWORD)>2 
            THEN CONCAT(SUBSTRING(PASSWORD,1,2),'**') ELSE ''
     END AS PASSWORD_MASKED

     ,DATE_ADD(STR_TO_DATE('20220321','%Y%M%D'),INTERVAL 1 MONTH)AS DT_DATE2

FROM MEMBER;
```

**2.** Numeric Func


```s
```

**3.** Date Func

```s
SELECT REGISTER_DATE
    .DATE_FORMAT(REGISTER_DATE,'%Y.%M.%D') AS DT_FORMAT
FROM MEMBER;

#2022-03-20 00:00:00 => 2022-03-01 , 2022-03-31
SELECT NOW()
    ,DATE_FORMAT(NOW(),'%Y.%M.01') AS START_DATE
    ,DATE_ADD(DATE_ADD(DATE_FORMAT(NOW(),'%Y.%M.%D'),INTERVAL 1 MONTH),INTERVAL -1 DAY) AS END_DATE
FROM DUAL;
```

**4.** Return Func

```s
```

**5.** Null Func

```s
```


